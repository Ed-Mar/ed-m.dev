{{ define "addational-css" }}
    {{ if (fileExists "static/css/notes-index.css")}}
        <link rel="stylesheet" href="{{ "/css/notes-index.css" | absURL }}">    
    {{ end }}
{{ end }}


{{ define "main" }}
    <div class="main container">
        <div class="header">
            <h2 class="header title"> Notes & Projects </h2>
            <h4 class="header subtitle"> Notes Collection broken down by Projects  </h4>
            <div class="header info">
                Basic project information, with a few of the latest post from those projects with non projest related notes below everything else.
            </div>
        </div>
        <div class="notes-index-sub-header">
            <h2>Projects </h2> 
        </div>
        <div class="notes-index-content-container">
            <!-- Loop all thur all pages with "type:project" in its Parms --> 
            {{range where .Site.Pages "Params.type" "project"}}
                <div class="notes-index-project-item-container">
                    <!-- If projectName is set then use it Link to that project's List Page -->
                    <!-- Note that the Project name and directory name need to be same -->
                    {{with .Param "projectName" }}
                        <div class="notes-index-project-item-header">
                            <h3><a href="{{"/notes/projects/" | relLangURL }}{{ . | urlize }}"> {{humanize .}}</a></h3>
                        </div>
                    {{end}}
                    <!-- If there is a "projectAltName: <Anything>" then display it -->
                    {{with .Param "projectAltName"}}
                        <div class="subtitle">
                            {{.}}
                        </div>
                    {{end}}

                    <br/>
                    <div class="project-item-information-container">

                        <div class="project-item-information-inner" >
                            <!--If there is github in the project index front matter then makes pull the github svg and put in the link to the projects base github--> 
                            {{with .Param "github"}}
                            {{ $githubAsset := resources.Get "/svgs/github.svg" }}
                                <a class="github-svg" href={{.}}> 
                                    <!-- Simple Dictonary insert for the nessary values for for the SVG size -->                                   
                                    {{ partial "github-svg.html" (dict "width" 30 "height" 30 ) }}                                    
                                </a>
                            {{end}}
                            Project Information
                            <div class="project-item-information-inner-content">
                                {{.Content}}
                            </div>
                        </div>
                        <div class="project-item-information-inner">
                            Project Stats
                            <br/>
                            Number of post
                            {{partial "num-post-for-project.html" .}}
                            <br/>
                            {{with .Param "status"}}
                                Project Status: {{.}}
                            {{end}}
                            <br/>
                            Number Unque Tags
                            {{ partial "count-unique-for-projects.html" . }}
                            <br/>
                            Last Post for this Project
                            <br/>
                            Project Start Date
                            <br/>
                            {{partial "last-date-of-post-for-project" .}}
                        </div>
                        <div class="project-item-information-inner-end">
                            Projects Latest Post                  
                        </div>
                    </div>
                    <br/>
                    <!-- Just a check to make sure the project name of the project is set before use I really don't think needed but I just had to -->
                    {{with .Param "projectName" }}
                        <!-- Set the Current Project Name that we will looking for it's Pages--> 
                        {{$projectname := .}}
                        <!-- Intilize an empty slice to collect the tags of every page of the given project -->  
                        {{$listOfCurrentTags := slice}}
                        <!-- Loop over each of the Pages matching the given projectname --> 
                        {{range where site.Pages "Params.project" $projectname}}
                            <!-- Loop over each of the tags for a given Page --> 
                            {{ range .Params.tags }}
                                <!-- Check to see if the tag is already in the slice of tags for whole project and if not add it to the slice --> 
                                {{ if in $listOfCurrentTags .}}
                                <!-- Note: this was quicker than trying to learn how to NOT in this funky lang -->
                                <!-- Do nothing if tag is already in the slice  --> 
                                {{else}}
                                    <!-- Add the non-included tag to the list of the Tags for the given project --> 
                                    {{$listOfCurrentTags = append . $listOfCurrentTags}}
                                {{end}}
                            {{end}}                            
                        {{end}}
                        <!-- Once all the pages have been iterated aswell as all the tags of each of them for a given project 
                            iterate over the slice of tags for the given project and put them in a link and display them. --> 
                        <div class="notes-index-project-tag-container">
                            <hr/>
                            <div class="">
                                Project Tags
                            </div>                            
                            {{range $listOfCurrentTags}}
                                <a href="{{ "/tags/" | relLangURL }}{{ . | urlize }}">{{ . | humanize}}</a>
                            {{end}}
                        </div>
                    {{end}} 
                </div>
            {{end}}
        </div>

    </div>
{{ end }}