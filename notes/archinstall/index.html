<!doctype html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><link rel=stylesheet href=https://ed-m.dev/css/style.css><link rel=stylesheet href=https://ed-m.dev/css/single-page.css><title>Arch Install | UEFI GRUB NVIDIA SLIM KDE | Ed-M.dev</title></head><body><nav class=navBar><ul><a href=/>Ed-M.Dev</a>
<a href=/notes>Notes</a>
<a href=/about>About</a></ul></nav><div class="main container single"><div class=single-page-content-container><div class=single-page-header><h2>Arch Install | UEFI GRUB NVIDIA SLIM KDE | Ed-M.dev</h2><time>Sat, Aug 27, 2022</time></div><br><div class=single-page-content><h1 id=arch-install>Arch Install</h1><p><em>221108_1807</em></p><h2 id=prelude>Prelude</h2><p>I was running in to some ergo issues with my dev laptop running Manjaro. I wanted a desktop the laptop and dock was being a pain. So I decided to go ahead make a desktop and do an arch install. Installing a linux without a GUI for desktop usage is not been something I have done before. I&rsquo;ve done most of the adjacent things, BSD NAS, containers and other smaller installs, but a full arch desktop no. Knowing this an arch install has some infamy associated with it I thought I give it ago and if failed just throw Manjaro on cause I know I can do that.</p><h2 id=hardware>Hardware</h2><p>AM4 Ryzan 5900X
Nvidia 3060
64G of RAM X.M.P | DDR4-3200 with XMP
2T Boot Drive NVME</p><h2 id=install>Install</h2><blockquote><p>I am not an expert nor is a tutorial. I am not going to pretend I know what I am doing. I keep learning the more about linux/GNU the more I use it. This Install information is only for my self and this hardware config at Nov. 2022</p></blockquote><p>All steps are just taken from here with some more googling in between <a href=https://wiki.archlinux.org/title/installation_guide>Arch Wiki - Installation</a></p><h3 id=arch-image-iso>Arch Image (ISO)</h3><p>Get an Arch ISO <a href=https://archlinux.org/download/>Arch Linux Download</a> pick download method.</p><p>I am doing this on my windows box I use for Photoshop and Steam.</p><p>Once the ISO has been obtained one needs to check the if same file you expected to down load. Sense I its on a windows machine I will check the SHA value of the ISO using <code>Get-FileHash</code> <a href="https://learn.microsoft.com/en-us/powershell/module/microsoft.powershell.utility/get-filehash?view=powershell-7.2">Get-FileHash - Microsoft</a> this should spit out a SHA code we can cross reference for validity</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Powershell data-lang=Powershell><span style=display:flex><span>	<span style=color:#24909d>Get-FileHash</span> /archlinux-2022.11.01-x86_64.iso | <span style=color:#24909d>Format-List</span>
</span></span></code></pre></div><p>If correct then I am good to move to loading the ISO onto my installation media this being some</p><p>I am using <a href=https://rufus.ie/en/>Rufus</a> I have used this in the past and works with any issue. Rufus did ask me download something in aid this iso which it did.</p><p>Once complete your good to go dis-mount and plug into the new machine. Then during the startup set hit the ENTER BIOS button on your keyboard (probability one of these F1,F12, F2, DEL) and in the boot order pic the USB media device with arch ISO installed on it.</p><h3 id=booting-arch-live-media>Booting Arch Live Media</h3><p>The loading of the ISO may take a few seconds to load into ram upto 2 mins depending on the machine.</p><p>When loaded you should be greeted with a cli with <code>root@archiso</code> or something similar</p><h4 id=needs-a-different-keyboard-layout>Needs a Different Keyboard layout</h4><p>Check the current keyboard layout if you&rsquo;re not about the <strong>US default</strong></p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>localectl status
</span></span></code></pre></div><p>If you need another layout you can list them all out with this</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span> ls /usr/share/kbd/keymaps/**/*.map.gz
</span></span></code></pre></div><p>to load a different keymap do with this command</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>loadkeys de-latin1
</span></span></code></pre></div><h4 id=check-if-youre-uefi-mode>Check if you&rsquo;re UEFI mode</h4><p>If this load without errors your good to move on</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ls /sys/firmware/efi/efivars
</span></span></code></pre></div><h4 id=check-internet-connection>Check Internet Connection</h4><h5 id=wifi>WIFI</h5><p>If you using WIFI. I am going to point you to <a href=https://wiki.archlinux.org/title/Iwd#iwctl>iwd</a>.
cause the machine I am doing this on is hardwired so i really don&rsquo;t have way to test this. So I would go to that page and read it.</p><p>it seems you need to use</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#999;font-style:italic>## Check to see if your Wifi Radio has been turned off</span>
</span></span><span style=display:flex><span>rfkill list
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>### If so then unblock it</span>
</span></span><span style=display:flex><span>rfkill unblock wifi
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>#--------------</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>### Start iwctl Crtl+d to exit</span>
</span></span><span style=display:flex><span>iwctl
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>### Once in iwctl to get the wifi card name </span>
</span></span><span style=display:flex><span>device list
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>### Once you have the device name &#39;device&#39; do a station scan with that device name</span>
</span></span><span style=display:flex><span>station _device_ scan
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>### Then List all the networks that &#39;device&#39; found to find teh SSID of your network</span>
</span></span><span style=display:flex><span>station _device_ get-networks
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>###</span>
</span></span><span style=display:flex><span>iwctl --passphrase _passphrase_ station _device_ connect _SSID_
</span></span></code></pre></div><h5 id=hardwire>Hardwire</h5><p>Check if your internet is up for your machine</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ip link
</span></span></code></pre></div><p>Should have loop back and then your Ethernet port</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu <span style=color:#3677a9>65536</span> qdisc noqueue state UNKNOWN ...
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>2: enp4s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span style=color:#3677a9>1500</span> qdisc fq_codel state UP ...
</span></span></code></pre></div><p>You&rsquo;re looking for the Broadcast (# 2) to be <strong>UP</strong> if not then check your connection. So See if the RJ45 is seated correctly in the jack, the cable integrity, and Connection to Switch.</p><blockquote><p>I don&rsquo;t be like me and waste like 6 hours to learn you have two bad self made Ethernet cables (I think they were just too long)</p></blockquote><p>Then check the connection to the external internet to come site you know is up.</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ping -c <span style=color:#3677a9>3</span> ed-m.dev
</span></span></code></pre></div><h2 id=disk-partition>Disk Partition</h2><p>Check the disk for any current partitions sense this going to be solo boot machine fresh install I can just partition with out care.</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>fdisk -l
</span></span></code></pre></div><p>This will list all the drives and there partitions this also tell you the name of your drive in <code>/dev/</code> your gonna need this</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>Disk /dev/nvme0n1: 1.82 TiB, 2000398934016 bytes, 3907029168 sectors  
</span></span><span style=display:flex><span>Disk model: Samsung SSD 970 EVO Plus 2TB  
</span></span><span style=display:flex><span>Units: sectors of 1 * 512 = 512 bytes  
</span></span><span style=display:flex><span>Sector size (logical/physical): 512 bytes / 512 bytes  
</span></span><span style=display:flex><span>I/O size (minimum/optimal): 512 bytes / 512 bytes
</span></span></code></pre></div><p>you have two options to partition you can <code>fdisk</code> which does work I did it once, but then I found there is also a <code>cfdisk</code> which is a little easier to use for my caveman brain</p><blockquote><p>If you&rsquo;re gonna use the fdisk (use the default for the blocking, then &ldquo;+2G&rdquo; to get the size(+ # `Bytes (M.G.T&mldr;)). For the Types mine where EFI type 1, Swap type 19, and linux root 86x type 23</p></blockquote><p>to start the partition use</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cfdisk /dev/nvme0n1
</span></span></code></pre></div><p>If you have a clean drive you should greeted with a option for partition table type go with <code>gpt</code>.</p><blockquote><p>There are two main types of partition tables <code>gpt</code> and <code>mbr</code>. <code>gpt</code> is the newer one and should be used for most things, but for edge cases and more info go this link: <a href=https://wiki.archlinux.org/title/Partitioning#GUID_Partition_Table>GPT and MBR</a></p></blockquote><p>Since I am going with a GRUB boot loader in UEFI mode then I am going to need EFI partition which is what I am going to make first.</p><h3 id=efi_partition><strong>EFI_PARTITION</strong></h3><p>Then you are on the main screen for <code>cfdisk</code> with the <strong>&ldquo;Free Space&rdquo;</strong>* selected highlighted then with the arrow keys (at bottom) pick <strong>&ldquo;New&rdquo;</strong>. Then you&rsquo;ll be promted input the size at the bottom input</p><p>For Size input 600M or 1G. The correct amount I really can&rsquo;t find like an exact amount 512M seems be a safe number Arch wiki says 500M+ .So I put 1G to be extra safe and not have to worry about it since i have 1.8T to play with.</p><p>Once that is complete the partition type needs to set to. With the newly created partition highlighted at the top the bottom should have option <strong>&ldquo;Type&rdquo;</strong> select that then a sub menu should pop up go the top of that where it says <strong>EFI System"</strong> select that.</p><h3 id=swap_partition><strong>SWAP_PARTITION</strong></h3><p>Swaps allow disk memory to used as part of the virtual memory (RAM) if needed. Its like an RAM overflow area to help when there is not enough RAM.</p><p>The Setup is just like the EFI, but how much swap is needed? it really depends if you think your gonna use more RAM than you have install Load up, but you have a lot of ram and can&rsquo;t think of work load that would use of more than you have install maybe less is better.</p><p>Its Kinda of weird math the more RAM you have the less SWAP your likely you need in relation to the ratio of RAM installed</p><p>So if you have more than 32G of RAM install you can probability get away with 1:1 (RAM : SWAP) while below (16G RAM :24 G SWAP or 8 G RAM:16 SWAP). Or its all made up and nothing matters.</p><p>Once you have decided on a size change the <strong>&ldquo;Type&rdquo;</strong> to <strong>Linux Swap</strong></p><h3 id=root_partition><strong>ROOT_PARTITION</strong></h3><p>Root partition is where you will live in this drive. So when for the size just leave it to what ever the default is to take the rest of the space of the drive.</p><p>For the <strong>&ldquo;Type&rdquo;</strong> pick <strong>Linux Root (x86-64)</strong></p><p>With that partitioning is complete
you should have something that looks like this</p><table><thead><tr><th>Device</th><th>&mldr;</th><th>Type</th></tr></thead><tbody><tr><td><code>/dev/nvme0n1p1</code></td><td>&mldr;</td><td>EFI System</td></tr><tr><td><code>/dev/nvme0n1p2</code></td><td>&mldr;</td><td>Linux swap</td></tr><tr><td><code>/dev/nvme0n1p3</code></td><td>&mldr;</td><td>Linux root (x86-64)</td></tr></tbody></table><p>Once you have something that looks like the above table it time to write the table partition to the drive.</p><p>Select the <strong>&ldquo;Write&rdquo;</strong> with arrow keys on the bottom menu.
it will ask you to type <strong>yes</strong> to confirm.Do so once you are you sure the table is correct.</p><p>With this complete you have a GPT Partition Table with a <code>EFI</code>, <code>SWAP</code>, and a <code>root</code> partition</p><h2 id=format-partitions>Format Partitions</h2><p>Confirm that the disk partition correctly</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>fdisk -l 
</span></span><span style=display:flex><span>Disk model: Samsung SSD <span style=color:#3677a9>970</span> EVO Plus 2TB  
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span>Disklabel type: gpt  
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>Device 		   Start     End  	    Sectors 	Size  	Type  
</span></span><span style=display:flex><span>/dev/nvme0n1p1 <span style=color:#3677a9>2048</span> 	 <span style=color:#3677a9>8390655</span> 	<span style=color:#3677a9>8388608</span> 	1G 		EFI System  
</span></span><span style=display:flex><span>/dev/nvme0n1p2 <span style=color:#3677a9>8390656</span> 	 142608383	<span style=color:#3677a9>134217728</span> 	64G 	Linux swap  
</span></span><span style=display:flex><span>/dev/nvme0n1p3 <span style=color:#3677a9>142608384</span> <span style=color:#3677a9>3907028991</span> <span style=color:#3677a9>3764420608</span> 	1.8T 	Linux root (x86-64)
</span></span></code></pre></div><p>I am going to format them in the order I crated them in</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#999;font-style:italic># EFI FORMAT </span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>## Command Format</span>
</span></span><span style=display:flex><span>mkfs.fat -F <span style=color:#3677a9>32</span> /dev/_efi_system_partition_
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>## Actual Input</span>
</span></span><span style=display:flex><span>mkfs.fat -F <span style=color:#3677a9>32</span> /dev/nvme0n1p1
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#999;font-style:italic># SWAP FORMAT </span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>## Command Format</span>
</span></span><span style=display:flex><span>mkswap /dev/_swap_partition_
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>## Actual Input</span>
</span></span><span style=display:flex><span>mkswap /dev/nvme0n1p2
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#999;font-style:italic># Linux Root (86x-64) FORMAT </span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>## Command Format </span>
</span></span><span style=display:flex><span>mkfs.ext4 /dev/_root_partition_
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>## Actual Input</span>
</span></span><span style=display:flex><span>mkfs.ext4 /dev/nvme0n1p3
</span></span></code></pre></div><blockquote><p>Note there is no output for success so if it worked your good. Also use <em>TAB</em> for auto complete is your friend during this whole thing.</p></blockquote><h2 id=mount-the-partitions>Mount The Partitions</h2><p>Mounting them in the same order again</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#999;font-style:italic># EFI MOUNT </span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>## Command Format</span>
</span></span><span style=display:flex><span>mount --mkdir /dev/_efi_system_partition_ /mnt/boot/efi
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>## Actual Input</span>
</span></span><span style=display:flex><span>mount --mkdir /dev/nvme0n1p1 /mnt/boot/efi
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#999;font-style:italic># SWAP ON </span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>## Command Format</span>
</span></span><span style=display:flex><span>swapon /dev/_swap_partition_
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>## Actual Input</span>
</span></span><span style=display:flex><span>swapon /dev/nvme0n1p2
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#999;font-style:italic># Root (x86-64) MOUNT</span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>## Command Format</span>
</span></span><span style=display:flex><span>mount /dev/_root_partition_ /mnt
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>## Actual Input</span>
</span></span><span style=display:flex><span>mount /dev/nvme0n1p3 /mnt
</span></span></code></pre></div><p>And with that you have completed mounting the partitions</p><h2 id=package-installation>Package Installation</h2><p>Install</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pacstrap -K /mnt base linux linux-firmware sudo networkmanager base-devel vim
</span></span></code></pre></div><p>Alright so this installs a few things and you may want to include, substitute, or exclude.</p><p>At minimum you going to neeed <code>base</code>, <code>linux</code>, <code>linux-firmware</code></p><p><code>base</code>: basic package for an arch install " Minimal package set to define a basic Arch Linux installation". <a href="https://archlinux.org/packages/?name=base">base</a>
<code>linux</code> this your linux kernel: <a href=https://archlinux.org/packages/core/x86_64/linux/>linux</a>
<code>linux-firmware</code> firmware for linux <a href=https://archlinux.org/packages/core/any/linux-firmware/>linux-firmware</a></p><hr><p>The following packages you don&rsquo;t need for an install, but most likely mite want: <code>sudo</code>, <code>networkmanager</code>, <code>base-devel</code>, <code>vim</code>.</p><p><code>sudo</code> Allows non root use temp power you should know what this.<a href=https://archlinux.org/packages/core/x86_64/sudo/>sudo</a> | <a href=https://wiki.archlinux.org/title/Sudo>sudo - Wiki</a>
<code>networkmanager</code> provides configuration and detection in addition to a daemon to this for you. Allows for auto connection to networks <a href=https://archlinux.org/packages/extra/x86_64/networkmanager/>networkmanager</a> | <a href=https://wiki.archlinux.org/title/NetworkManager>Network Manager - Wiki</a>
<code>base-devel</code> allows for building and installation of packages on the AUR or things not Arch repo proper.** You could get away with not wanting this**, but some of the things I want are on the AUR and thus I am going to use this, feel free to not to.
<code>vim</code> its a in terminal text editor you&rsquo;re gonna need one moving forward. If you prefer <code>nano</code> use that instead</p><p>so run your <code>pacstrap</code> and get at least the required packages.</p><h2 id=configuration>Configuration</h2><p>Create a <code>fstab</code></p><blockquote><p>file can be used to define how disk partitions, various other block devices, or remote file systems should be mounted into the file system. ~ <a href=https://wiki.archlinux.org/title/Fstab>fstab - wiki</a></p></blockquote><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>genfstab -U /mnt &gt;&gt; /mnt/etc/fstab
</span></span></code></pre></div><p>with this you can <code>arch-chroot</code> in your system.</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>arch-chroot /mnt
</span></span></code></pre></div><p>You are now logged into the new system even if only temporary (I lost colour from the cli when I did this, your fine)</p><h3 id=timezone-config>Timezone Config</h3><p>unless you live in the UTC your going to need to change your timezone</p><p>/usr/share/zoneinfo/<em>Region</em>/<em>City</em></p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#999;font-style:italic>#/usr/share/zoneinfo/_Region_/_City_</span>
</span></span><span style=display:flex><span>ls /usr/share/zoneinfo/
</span></span></code></pre></div><p>This will give you list of Regions for. Search through this directory to find yours. Tab auto complete is your friend here</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#999;font-style:italic>#example US Mountain time would be</span>
</span></span><span style=display:flex><span>/usr/share/zoneinfo/US/Mountain
</span></span></code></pre></div><p>Once you have found yours you need to link it</p><blockquote><p>This creates a symbolic link</p></blockquote><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#999;font-style:italic>## Input Format</span>
</span></span><span style=display:flex><span>ln -sf /usr/share/zoneinfo/_Region_/_City_ /etc/localtime
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>## Example Input</span>
</span></span><span style=display:flex><span>ln -sf /usr/share/zoneinfo/US/Mountain /etc/localtime
</span></span></code></pre></div><p>Then you need to update your hardware clock with the system clock</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>hwclock --systohc
</span></span></code></pre></div><h3 id=locale>Locale</h3><p>This is used to format text to region preferences by other applications <a href=https://wiki.archlinux.org/title/locale>locale - wiki</a></p><p>this is where you going to need to edit a file so replace <code>vim</code> with <code>nano</code> or whatever you downloaded.</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>vim /etc/locale.gen
</span></span></code></pre></div><p>once in you&rsquo;re going to need to un-comment your preferences for the use do these two if you US based, if not use your head you can always come back and redo this once the setup has been completed.
<code>en_US.UTF-8 UFT-8</code>
<code>en_US ISO-8859-1</code></p><p><img src=https://i.imgur.com/iDupOvR.png alt="US options"></p><p>Once the file has been updated and saved run:</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>locale-gen
</span></span></code></pre></div><h3 id=networking>Networking</h3><p>Naming your system. Once you have a name in mind run:</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>vim /etc/hostname
</span></span></code></pre></div><p>input your desired name and save the file, then run:</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>vim /etc/hosts
</span></span></code></pre></div><p>Then in the file populate it with this, but replace the &ldquo;your_hostname&rdquo; with whatever you put in for the /etc/hostname</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>127.0.0.1 	localhost
</span></span><span style=display:flex><span>::1			localhost
</span></span><span style=display:flex><span>127.0.1.1	<span style=color:#ed9d13>&#34;your_hostname&#34;</span>
</span></span></code></pre></div><p>If you downloaded <code>networkmanager</code> now is the time to enable it.</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>systemctl <span style=color:#24909d>enable</span> NetworkManager
</span></span></code></pre></div><h3 id=setting-root-password>Setting Root Password</h3><p>To set a password for the root user run:</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>passwd
</span></span></code></pre></div><blockquote><p>Note if you have read the Arch install Wiki ( <a href=https://wiki.archlinux.org/title/installation_guide#Boot_loader>Arch Wiki</a> )this is where it drops you off kinda. leading you to another page for a boot loaders</p></blockquote><h2 id=bootloader>Bootloader</h2><p>I will be going over how to install GRUB. There are other options, but I have used this one before and if your installing Arch you have used this before maybe not even really knowing it prior.</p><h3 id=microcode>Microcode</h3><p>AMD and Intel send updates to the microcode of there processors from time to time. This allows <code>pacman</code> Arch&rsquo;s package manager to pick those up update accordingly</p><p>install your respective CPU package:</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#999;font-style:italic>#AMD Processors </span>
</span></span><span style=display:flex><span>pacman -S amd-ucode
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>#Intel Processors</span>
</span></span><span style=display:flex><span>pacman -S intel-ucode
</span></span></code></pre></div><h3 id=grub--installation>GRUB Installation</h3><p>install grub and the efi boot manager.</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pacman -S grub efibootmgr
</span></span></code></pre></div><p>Installing <code>grub</code> with a <em>&ldquo;x86_64-efi&rdquo;</em> where we mounted the efi partition prior in this note.</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>grub-install --target=x86_64-efi --efi-directory=/boot/efi --bootloader-id=grub
</span></span></code></pre></div><blockquote><p>Note if you did not mount the efi partition from earlier for some reason your gonna need to <code>exit</code> and run the mount command for the efi partition section. I&rsquo;ve seem some tutorials where they mount right prior to this and I couldn&rsquo;t get it work, then saw some fourm post about this issue. So I made this note.</p></blockquote><p>Once completed it will tell you if there were any errors. If you good then you can make the grub config with this command:</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>grub-mkconfig -o /boot/grub/grub.cfg
</span></span></code></pre></div><p>This notice the Microcode you install prior this.</p><h2 id=jumping-off-point>Jumping off Point</h2><p>So if you want you could <code>exit</code> and <code>reboot</code> if you wanted but all you would have a is root user and minimal arch install, but I am going to though installing some features that most have come to expect from a desktop system.</p><h2 id=adding-a-non-root-user>Adding a Non Root User</h2><p>create a new user with a home directory in the wheel group. Replace <em>_desired_username</em> with you actual desired username.</p><blockquote><p>If you did not install sudo for whatever reason now is the time <code>pacman -S sudo</code></p></blockquote><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>useradd -m -G Wheel _desired_username
</span></span></code></pre></div><p>give the new user a password.</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>passwd _desired_username
</span></span></code></pre></div><p>Then sudoers needs to edited to allow users in the wheel group to do commands a root user can.</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>vim /etc/sudoers
</span></span></code></pre></div><p>Un-comment the <code>%wheel ALL=(ALL:ALL) ALL</code>
<img src=https://i.imgur.com/vLKzm1K.png alt="edit sudoers"></p><p>Now the new user can operate <code>sudo</code></p><h2 id=gui-desktop-environment>GUI Desktop Environment</h2><p>I am going to install plasma/kde</p><h3 id=xorg>Xorg</h3><p>Install xorg sense I am</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pacman -S xorg-server
</span></span></code></pre></div><h3 id=gpu-drivers>GPU drivers</h3><p>My experience is going to be from NVIDIA, and I am going with close source drivers.</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#999;font-style:italic># Nvidia</span>
</span></span><span style=display:flex><span>pacman -S nvidia nvidia-utils nvidia-settings
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># AMD/ATI </span>
</span></span><span style=display:flex><span>pacman -S xf86-video-amdgpu
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic># Intel </span>
</span></span><span style=display:flex><span>pacman -S xf86-video-intel
</span></span></code></pre></div><h3 id=plasma>Plasma</h3><p>I am going for slim plasma install so I am going to forgo the whole kde-applications. Since I am using Nvidia I am going to have stick to X11(xorg). So my install is not the most normal thing</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo pacman -S plasma-desktop sddm-kcm plasma-nm plasma-pa kdeplasma-addons kde-gtk-config dolphin konsole firefox
</span></span></code></pre></div><p>Alright I know that is a lot of packages. So let me break them down.
<code>plasma-desktop</code>: This is a slim-ed down version of the plasma <a href="https://archlinux.org/packages/?name=plasma-desktop">plasma-desktop</a> | <a href=https://wiki.archlinux.org/title/KDE#Plasma>KDE - wiki</a></p><p><code>sddm-kcm</code>: This the sdm package which is a display manager(login screen post boot) for kde. the kcm allows to the editing of it via the setting menu in plasma. <a href=https://wiki.archlinux.org/title/SDDM>sddm - wiki</a></p><blockquote><p>A <a href=https://en.wikipedia.org/wiki/X_display_manager_(program_type) title="wikipedia:X display manager (program type)">display manager</a>, or login manager, is typically a graphical user interface that is displayed at the end of the boot process in place of the default shell. There are various implementations of display managers, just as there are various types of <a href=https://wiki.archlinux.org/title/Window_managers title="Window managers">window managers</a> and <a href=https://wiki.archlinux.org/title/Desktop_environments title="Desktop environments">desktop environments</a>. ~ <a href=https://wiki.archlinux.org/title/Display_manager>Display Manager - wiki</a></p></blockquote><p><code>plasma-nm</code>: is plasma integration the network manager we install earlier <a href=https://archlinux.org/packages/extra/x86_64/plasma-nm/>plasma-nm</a></p><p><code>plasma-pa</code>: Is <a href=https://wiki.archlinux.org/title/PulseAudio>Pulse Audio</a> which is middleware for apps and your audio output. Then the Plasma Gui wrapper that allows audio control via GUI.</p><p><code>kdeplasma-addons</code>: is a collection of few things that deem I wanted to have, Its a collection</p><ul><li>kwin-addons:additional desktop and window switchers for KWin</li><li>plasma-calendar-addons additional calendar plugins for Plasma 5</li><li>plasma-dataengines-addons: additional data engines for Plasma</li><li>plasma-runners-addons: additional runners for Plasma 5 and Krunner</li><li>plasma-wallpapers-addons: additional wallpaper plugins for Plasma 5</li><li>plasma-widgets-addons:additional widgets for Plasma 5</li></ul><p><code>kde-gtk-config</code> In theory will allow GTK apps to use the current KDE colouring/style but I not sure it works thats well. idk <a href=https://github.com/KDE/kde-gtk-config>kde-gtk-config</a></p><p>The last three are what you would normally call applications
<code>dolphin</code>: A GUI file explorer its used everywhere in linux
<code>konsole</code>: Its the KDE terminal you need some type of terminal install, cause I did initially install this desktop with out and then your realised you kinda screwed lol</p><blockquote><p>lil tip you load in session and don&rsquo;t have a terminal <code>Crtl</code>+<code>Alt</code>+<code>F2</code> will take you to a non GUI session at least in X11</p></blockquote><p><code>firefox</code>: not my normal browser, but to get you started in cause you want to google something real quick</p><blockquote><p>If you&rsquo;ve install KDE before you notice I did not install wayland that casuse I did and I could not get it load and yes I did <a href=https://community.kde.org/Plasma/Wayland/Nvidia>/Plasma/Wayland/Nvidia</a>. So what ever Xorg is work ing fine for me.</p></blockquote><p><strong>Enable the Desktop Manager</strong></p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>systemctl <span style=color:#24909d>enable</span> sddm-kcm
</span></span></code></pre></div><h2 id=done>Done.</h2><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#24909d>exit</span>
</span></span><span style=display:flex><span>umount -R /mnt
</span></span><span style=display:flex><span>reboot
</span></span></code></pre></div><p>during the reboot get the bios open and switch the boot load to point to your drive and not the install media.</p><p>Your good to go.</p><h1 id=post-notes>Post Notes.</h1><p>I am not proud of it took my <strong>13</strong> tries to get this right over two days. I learned at lot about things I never really looked into before having run linux for over 5 years cause I just used some of the simpler installers distros.</p><p><img src=https://i.imgur.com/lVMiR0J.jpg alt="enter image description here"></p><p><em>After a lil ricing</em></p><p><em>221109_0103</em></p></div></div></div></body><footer><hr>Author <a href=https://ed-m.dev/about>Edward M- </a>| Framework <a href=https://gohugo.io/>Hugo</a></footer></html>