<!doctype html><head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta http-equiv=x-ua-compatible content="ie=edge">
<link rel=stylesheet href=https://ed-m.dev/css/style.css>
<link rel=stylesheet href=https://ed-m.dev/css/single-page.css>
<title>Trying to get Kafka to send Rest Messages | 220712</title>
</head>
<body>
<nav class=navBar>
<ul>
<a href=/>
Ed-M.Dev
</a>
<a href=/notes>
Notes
</a>
<a href=/about>
About
</a>
</ul>
</nav>
<div class="main container single">
<div class=single-page-content-container>
<div class=single-page-header>
<h2>Trying to get Kafka to send Rest Messages | 220712</h2>
<time>Tue, Jul 12, 2022</time>
<div class=single-page-project>
<h3><a href=/notes/projects/conduit> Project - Conduit</a></h3>
</div>
<div class=tags-container>
<div class=tag-list-item>
<a href=/tags/kafka>Kafka</a>
</div>
<div class=tag-list-item>
<a href=/tags/kafka-messaging>Kafka messaging</a>
</div>
<div class=tag-list-item>
<a href=/tags/rest>Rest</a>
</div>
<div class=tag-list-item>
<a href=/tags/go>Go</a>
</div>
<div class=tag-list-item>
<a href=/tags/devblog>Devblog</a>
</div>
</div>
</div>
<br>
<div class=single-page-content>
<h1 id=220712>220712</h1>
<p><em>0251</em>
So this is what I came up with I am positive this will change once the integration is more along, but I need to start from some where.
<img src=https://i.imgur.com/BpSgQ1N.png alt="Draft of request and response for kafka messages"></p>
<h3 id=request>Request</h3>
<h4 id=orchestration>Orchestration</h4>
<p><img src=https://i.imgur.com/q69SSB3.png alt="sage orchestration">
So in the request I have the Saga with some unique id for the Saga orchestrated and the name. so I know where the to send the response.</p>
<h4 id=transaction>Transaction</h4>
<p><img src=https://i.imgur.com/yvpPxUY.png alt="saga transactions">
I don' think this strictly necessary, but I mite need it. I would be good to know even if not really needed currently</p>
<h4 id=body>Body</h4>
<p><img src=https://i.imgur.com/KnXU7C0.png alt="Request Data">
This self explanatory this will be the data if any needed to be sent to the other services</p>
<h3 id=response>Response</h3>
<h4 id=type--body>Type + Body</h4>
<p><img src=https://i.imgur.com/PaU18pA.png alt="Type and body">
So I have a quick type I mite change that to response code like the http response codes.Then for the body this would be where error or the wanted response. I mite end up using the type in case sending a is not needed in a no content.</p>
<p>Okay I am working on the struct for the message type for in go and I was thinking do I want two different <em>&lsquo;styles&rsquo;</em>. So I can keep the style of request/response or or hear me out I have a sub struct with a data/body. I am not sure</p>
<p><em>2159</em>
So I changed some things around with Message for compensation from my planing earlier. to this
<img src=https://i.imgur.com/h77YTEb.png alt="Event Message Struct "></p>
<p>I know I will move and change this around has time progresses. I think having the name and id isn&rsquo;t really necessary once I come with a better system of just pick one.</p>
<h2 id=i-am-not-speed>I am not speed.</h2>
<p>So I got it to send the message type, but the issues it its very slow. I am guessing cause its not sending them until it fills up or something. I really have no clue gonna try and figure it it out now
<img src=https://i.imgur.com/0Mj846a.png alt="enter image description here"></p>
<p><em>2201713_0008</em>
Okay there seems to be post on this. Its just as I thought it seems I don&rsquo;t fully understanding the package.
<a href=https://github.com/segmentio/kafka-go/issues/417>Github -Issue</a></p>
<p>Unrelated:Thought this was interesting. <a href=https://bignerdranch.com/blog/exploring-go-v1-18s-generics/>Go 1.18 Generics</a></p>
</div>
</div>
</div>
</body>
<footer><hr>Author <a href=https://ed-m.dev/about>Edward M- </a>| Framework <a href=https://gohugo.io/>Hugo</a></footer>
</html>