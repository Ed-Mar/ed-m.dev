<!doctype html><head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta http-equiv=x-ua-compatible content="ie=edge">
<link rel=stylesheet href=https://ed-m.dev/css/style.css>
<link rel=stylesheet href=https://ed-m.dev/css/single-page.css>
<title>Getting Local DNS configed with Minikube | 220826</title>
</head>
<body>
<nav class=navBar>
<ul>
<a href=/>
Ed-M.Dev
</a>
<a href=/notes>
Notes
</a>
<a href=/about>
About
</a>
</ul>
</nav>
<div class="main container single">
<div class=single-page-content-container>
<div class=single-page-header>
<h2>Getting Local DNS configed with Minikube | 220826</h2>
<time>Thu, Aug 25, 2022</time>
<div class=single-page-project>
<h3><a href=/notes/projects/conduit> Project - Conduit</a></h3>
</div>
<div class=tags-container>
<div class=tag-list-item>
<a href=/tags/minikube>Minikube</a>
</div>
<div class=tag-list-item>
<a href=/tags/ingress>Ingress</a>
</div>
<div class=tag-list-item>
<a href=/tags/local-dns>Local DNS</a>
</div>
<div class=tag-list-item>
<a href=/tags/kubernetes>Kubernetes</a>
</div>
</div>
</div>
<br>
<div class=single-page-content>
<h1 id=220825>220825</h1>
<p><em>_0858</em></p>
<h2 id=working-on-minikube>Working on minikube</h2>
<p>been running into trouble getting keycloak up and running using the bitnami chart for many reason and some I really don&rsquo;t get. Also they seem to be updating it just as fast I am fucking with it. so i&rsquo;d come back and they would have added or updated so I&rsquo;m never positive if I had something wrong or something else. So I took a break from elimination testing values of the chart to deal with something that has been bothering me which would be the ingress DNS and minikube. So I looking into making it more normal than it just kinda working by either or accessing the cluster ip or using the minikube ingress which neither seem to work for me constantly</p>
<p>So working on local DNS is always a fun thing cause one wrong file edit and you can no longer look anything else on that machine to undo you mistake (I only did it once this time.).</p>
<p>Since the last year when I was messing around with the kube either to me not knowing or existing a minikube addon called &ldquo;ingress-dns&rdquo; has appeared in my search engine results which looks to ease my whao&rsquo;s.</p>
<p><a href=https://minikube.sigs.k8s.io/docs/handbook/addons/ingress-dns/>Link to minikube ingess-dns install guide</a></p>
<p>my current dev-machine is running Manjaro/Arch so the <strong>&ldquo;Linux OS with Network Manager&rdquo;</strong> was the appropriate solution for installation for me(I tried the other ones, I lost DNS so not those)</p>
<p><img src=https://i.imgur.com/f4ICqTa.png alt="sc of relevant installation information"></p>
<p>all of these commands worked besides the</p>
<div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#24909d>echo</span> <span style=color:#ed9d13>&#34;server=/test/</span><span style=color:#6ab825;font-weight:700>$(</span>minikube ip<span style=color:#6ab825;font-weight:700>)</span><span style=color:#ed9d13>&#34;</span> &gt;/etc/NetworkManager/dnsmasq.d/minikube.conf
</code></pre></div><p>which lead to a</p>
<div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>permission denied: /etc/NetworkManager/dnsmasq.d/minikube.conf
</code></pre></div><p>but this just due to it trying to pipe and make a new file in a protected location and adding sudo would only apply to the echo and not the create file. So I just echoed out the first part and sudo vim&rsquo;ed a new file and pasta&rsquo;ed it into and followed the rest of the instruction. I am sure there is a way to sudo the pipe as well, but I don&rsquo;t know how to.</p>
<p>So what this allows is for minikube to host on &ldquo;*.test " as one would expect.</p>
<p><img src=https://i.imgur.com/aRGH41U.png alt="example ingress-dns working"></p>
<p><img src=https://i.imgur.com/7z0y8Lj.png alt="more example of ingress-dns working"></p>
<p>Not like a world changer, but I think it&rsquo;s rather cool. It does allow for a more accurate hosted kube &lsquo;production&rsquo; environment
cause you can create ingress classes/ingress/endpoints/certs that at least look more like the paid hosting than dumpy local environment.</p>
<blockquote>
<p>Note: I do not like .test but it seems the best cause .local cannot be used as its reversed for other items in the DNS realm; which would have been my preferred base host name.</p>
</blockquote>
</div>
</div>
</div>
</body>
<footer><hr>Author <a href=https://ed-m.dev/about>Edward M- </a>| Framework <a href=https://gohugo.io/>Hugo</a></footer>
</html>