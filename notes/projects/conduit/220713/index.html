<!doctype html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><link rel=stylesheet href=https://ed-m.dev/css/style.css><link rel=stylesheet href=https://ed-m.dev/css/single-page.css><title>Messing around with Kafka | 220713</title></head><body><nav class=navBar><ul><a href=/>Ed-M.Dev</a>
<a href=/notes>Notes</a>
<a href=/about>About</a></ul></nav><div class="main container single"><div class=single-page-content-container><div class=single-page-header><h2>Messing around with Kafka | 220713</h2><time>Wed, Jul 13, 2022</time><div class=single-page-project><h3><a href=/notes/projects/conduit>Project - Conduit</a></h3></div><div class=tags-container><div class=tag-list-item><a href=/tags/kafka>Kafka</a></div><div class=tag-list-item><a href=/tags/experiments>Experiments</a></div><div class=tag-list-item><a href=/tags/devblog>Devblog</a></div><div class=tag-list-item><a href=/tags/rest>Rest</a></div></div></div><br><div class=single-page-content><h1 id=220713>220713</h1><p><a href=https://stackoverflow.com/questions/40872520/whats-the-purpose-of-kafkas-key-value-pair-based-messaging>Wtf is the key used for in Kafka</a> I saw the key inside of the go-kafka for the writer and wasn&rsquo;t wtf it was meant for. TIL I think it to tell kafka what partition to use. This is a little hard for I to understand is cause I&rsquo;m not really using partitions (or at least on purpose) cause I not needing the redundancy on my local machine for test/development data.</p><h2 id=speeed>Speeed</h2><p>Okay the slow kafka message receiving has been corrected and was a simple fix just update the writer from the default for Batch Size from 1000 messages and the Batch Timeout of 10 mil seconds. Granted I was getting more than a 10 mil second delay but whatever
<img src=https://i.imgur.com/heNFcx5.png alt="same second sent and received "></p><p><img src=https://i.imgur.com/5aglfnU.png alt=Batchtime/BatchSize></p><p><em>1530</em>
So I am at the point where I need to setup the Mux to grab the intended transaction from the event message and I am no quite sure where I should plug in at so I can try and re use the handlers for the rest. The issue with that I am going to need to pass some http.Response/http.Request which I am going to make/pass and then drop later. The other option thats in my head would be to make new ones that plug right into the model functions directly
<img src=https://i.imgur.com/hjcjSgl.png alt="enter image description here"></p><table><thead><tr><th>Use Existing Handlers</th><th>Make new Event Message Handlers</th></tr></thead><tbody><tr><td>++ Reuse code</td><td>&ndash; Make all new Handlers</td></tr><tr><td>&ndash; Passing un-needed Data</td><td>++ Limit what function other service have access to. (cause not every service needs the ability to everything the Rest service does)</td></tr><tr><td>++ Some Error Catching is already there</td><td>++ Don&rsquo;t Need to Deal with request/headers/ http things</td></tr><tr><td>++Smaller Code base</td><td></td></tr></tbody></table><p>.. I am sure I forgetting or not thinking of some items</p><p>I still not sold on which is better or what I am suppose to do. I am going to try and use the existing handler with casting tom foolery to try and not have two handlers do about the same thing.</p><p><em>_1758</em></p><p>Alright that wasn&rsquo;t that painful. Instead of trying to plug into services at handler level what if I just start at the beginning. Just send a HTTP Request. Granted this may cause some items that need be checked once in the cloud with CORS, TLS, and even have each services-event manger to have credentials. These are all items for future me but I think I understand how to deal atleast two of those. So sending a http request</p><p><img src=https://i.imgur.com/Y2REnv5.png alt="Sorry for the wide Screen, but So the Server REST API, The Server Event Message Reader, then writer triggering. Completed all with in the same second which was cool "></p><p>Alright Now I Need to do the writer part to send message back to the send that all work or did not.</p></div></div></div></body><footer><hr>Author <a href=https://ed-m.dev/about>Edward M- </a>| Framework <a href=https://gohugo.io/>Hugo</a></footer></html>