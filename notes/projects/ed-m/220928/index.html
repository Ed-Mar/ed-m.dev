<!doctype html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><link rel=stylesheet href=https://ed-m.dev/css/style.css><link rel=stylesheet href=https://ed-m.dev/css/single-page.css><title>Sub-Section Unique Tag Collection | 220928</title></head><body><nav class=navBar><ul><a href=/>Ed-M.Dev</a>
<a href=/notes>Notes</a>
<a href=/about>About</a></ul></nav><div class="main container single"><div class=single-page-content-container><div class=single-page-header><h2>Sub-Section Unique Tag Collection | 220928</h2><time>Wed, Sep 28, 2022</time><div class=single-page-project><h3><a href=/notes/projects/ed-m>Project - Ed m</a></h3></div><div class=tags-container><div class=tag-list-item><a href=/tags/hugo>Hugo</a></div><div class=tag-list-item><a href=/tags/devblog>Devblog</a></div><div class=tag-list-item><a href=/tags/kind-of-useful>Kind of useful</a></div></div></div><br><div class=single-page-content><h1 id=220928>220928</h1><h2 id=current-progress>Current Progress</h2><p><img src=https://i.imgur.com/UmGLoAe.png alt="Current Progress"></p><p>The <em>"<strong>{{.IsDescendant $anotherPage}}</strong>"</em> is still working from yesterday to change the layout for depending of depth dir in notes.</p><h2 id=getting-all-tags-for-a-given-project-and-counting-the-occurrences>Getting all tags for a given project and counting the occurrences</h2><p><em>_1001</em></p><p>I would like get all the tags for a given project and then have a number for how many times they appeared to do things. I am not positive yet if just going to be a weight thing or just throw the number next to it. then if you click on it do something.</p><h3 id=attempt-1>Attempt 1</h3><p>So I tired to have a slice of dictators with the key word being the term it self and value being how many times it has occurred. Well that was the plan anyway, but when I tired to use the <strong>in</strong> keyword in hugo to try and search the slice for the maps key it doesn&rsquo;t work that nice</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span><span style=color:#999;font-style:italic>&lt;!-- Note this does not work --&gt;</span> 
</span></span><span style=display:flex><span>&lt;<span style=color:#6ab825;font-weight:700>div</span>  <span style=color:#bbb>class</span>=<span style=color:#ed9d13>&#34;project all-tags container&#34;</span>&gt;
</span></span><span style=display:flex><span>	{{$sliceName := slice}}
</span></span><span style=display:flex><span>	{{$d1 := dict  &#34;tagName1&#34;  4}}
</span></span><span style=display:flex><span>	{{$d2 := dict  &#34;tagName2&#34;  2}}
</span></span><span style=display:flex><span>	{{$d3 := dict  &#34;tagName3&#34;  7}}
</span></span><span style=display:flex><span>	{{$sliceName = append  $d1  $sliceName}}
</span></span><span style=display:flex><span>	{{$sliceName = append  $d2  $sliceName}}
</span></span><span style=display:flex><span>	{{$sliceName = append  $d3  $sliceName}}
</span></span><span style=display:flex><span>	&lt;<span style=color:#6ab825;font-weight:700>div</span>&gt;Output of Slice Name: {{$sliceName}}&lt;/<span style=color:#6ab825;font-weight:700>div</span>&gt;
</span></span><span style=display:flex><span>	{{if  in  $sliceName  &#34;tagName1&#34;}}
</span></span><span style=display:flex><span>		| true |
</span></span><span style=display:flex><span>	{{else}}
</span></span><span style=display:flex><span>	| false |
</span></span><span style=display:flex><span>	{{end}}
</span></span><span style=display:flex><span>&lt;/<span style=color:#6ab825;font-weight:700>div</span>&gt;
</span></span></code></pre></div><blockquote><p>Output:
Output of Slice Name: [map[tagName1:4] map[tagName2:2] map[tagName3:7]]
| false |</p></blockquote><p>I am going to play with this for a while to see if can get something similar to work.</p><h3 id=attempt-11>Attempt 1.1</h3><p>Try with Scratch</p><p>Gotta play with this a little</p><p>Does the NewScratch Overwrite maps with same key or throw an error?</p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>{{$data:= newScratch}}
</span></span><span style=display:flex><span>{{$data.SetInMap  &#34;projectTags&#34;  &#34;tagName1&#34;  5  }}
</span></span><span style=display:flex><span>{{$data.SetInMap  &#34;projectTags&#34;  &#34;tagName1&#34;  7  }}
</span></span><span style=display:flex><span>{{$data}}
</span></span></code></pre></div><p>Output: >{map[projectTags:map[tagName1:7]] {{0 0} 0 0 0 0}}</p><p>It overwrites</p><p><del>Just found out that Hugo does not have a get via key function. So it looks like I will have to create my own</del></p><blockquote><p>Go and hug your normal programming language</p></blockquote><p>Nevermind it kind does have a Get function for slices and maps. It&rsquo;s call index (for some reason&mldr;)</p><h3 id=attempt-2>Attempt 2</h3><p><em>_1057</em></p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>{{$data:= newScratch}}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>{{$data.SetInMap  &#34;projectTags&#34;  &#34;tagName1&#34;  5  }}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>{{$data.SetInMap  &#34;projectTags&#34;  &#34;tagName1&#34;  7  }}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>{{$data.SetInMap  &#34;projectTags&#34;  &#34;tagName2&#34;  69  }}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>{{$data.SetInMap  &#34;projectTags&#34;  &#34;tagName3&#34;  420  }}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>{{$temp := $data.Get  &#34;projectTags&#34;}}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Collection of maps:s{{$temp}}&lt;br/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Whats at &#34;tagName1&#34; : {{index  $temp  &#34;tagName1&#34;}}&lt;br/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Whats at &#34;tagName666&#34; : {{index  $temp  &#34;tagName666&#34;}}&lt;br/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>{{if (index  $temp  &#34;tagName1&#34;) }}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>The Check for key &#34;tagName1&#34; has found something: {{index  $temp  &#34;tagName1&#34;}}&lt;br/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>{{else}}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>The Check for key &#34;tagName1&#34; has found NOTHING &lt;br/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>{{end}}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>{{if (index  $temp  &#34;tagName666&#34;) }}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>The Check for key &#34;tagName666&#34; has found something&lt;br/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>{{else}}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>The Check for key &#34;tagName666&#34; has found Nothing {{index  $temp  &#34;tagName666&#34;}}&lt;br/&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>{{end}}
</span></span></code></pre></div><blockquote><p>Output:
Collection of maps:smap[tagName1:7 tagName2:69 tagName3:420]<br>Whats at &ldquo;tagName1&rdquo; : 7<br>Whats at &ldquo;tagName666&rdquo; :<br>The Check for key &ldquo;tagName1&rdquo; has found something: 7<br>The Check for key &ldquo;tagName666&rdquo; has found Nothing</p></blockquote><p>Alright will this experimentation complete I think have all the necessary understanding to do this in combination with my tag work prior to this.</p><h4 id=complete-base-logic-complete>Complete Base Logic Complete</h4><p><em>_1242</em></p><div class=highlight><pre tabindex=0 style=color:#d0d0d0;background-color:#202020;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>{{with  .Param  &#34;projectName&#34;  }}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>&lt;!-- Set the Current Project Name that we will looking for it&#39;s Pages--&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>{{$projectname := .}}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>&lt;!-- Intilize a newScratch to hold the collections of maps of tags them self and number of times they appear in the project&#39;s notes --&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>{{$projectTagsCollection:= newScratch}}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>&lt;!--These 2 need to be Intilized and set or you&#39;ll get some nil errors--&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>{{$projectTagsCollection.SetInMap  &#34;projectTags&#34;  &#34;DELETE-ME&#34;  &#34;Once Done - Use me and throw me away&#34;  }}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>{{$tempMap := dict  &#34;Just-Need-To-Initialize-This&#34;  666  }}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>&lt;!-- Loop over each of the Pages matching the given projectname --&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>{{range  where site.Pages  &#34;Params.project&#34;  $projectname}}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>&lt;!-- Loop over each of the tags for a given Page --&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>{{  range  .Params.tags  }}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>&lt;!--Set tempMap to the &#34;projectTags&#34; from inside projectTagsCollection--&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>{{$tempMap = $projectTagsCollection.Get  &#34;projectTags&#34;}}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>&lt;!-- Check to see if Tag is in the collection of maps--&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>{{if (index  $tempMap  .)}}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>&lt;!-- If the current Tag is already in the Collection of maps Key--&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>&lt;!-- We take the value at that tag and add one to it and set it to a temp--&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>{{$plusOne := add (index  $tempMap  .) 1}}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>&lt;!-- Then the new couter value is overwritten at the current tags key value in the collection of project tags --&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>{{$projectTagsCollection.SetInMap  &#34;projectTags&#34;  .  $plusOne}}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>{{else}}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>&lt;!-- If the current Tag is NOT in the Collection of maps Key--&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>&lt;!-- Then we add to the collection with value of 1 --&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>{{$projectTagsCollection.SetInMap  &#34;projectTags&#34;  .  1}}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>&lt;!-- I want to limit the exposer place holder DeleteMe so I delete it as soon as there is another key inserted --&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999;font-style:italic>&lt;!-- Yes I am aware that its a waste to keep this here for every new tag--&gt;</span>
</span></span><span style=display:flex><span>{{$projectTagsCollection.DeleteInMap  &#34;projectTags&#34;  &#34;DELETE-ME&#34;}}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>{{end}} <span style=color:#999;font-style:italic>&lt;!--end of if --&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>{{end}}<span style=color:#999;font-style:italic>&lt;!-- end of range of tags --&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>{{end}}<span style=color:#999;font-style:italic>&lt;!-- end of pages that make project name --&gt;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>{{$projectTagsCollection.Get  &#34;projectTags&#34;}}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>{{end}}
</span></span></code></pre></div><p>Output:
map[bitnami:1 devblog:2 ingress:1 keycloak:2 kubernetes:1 local-dns:1 minikube:1 postgres:1]</p><p>With my current number of post/notes these tags do indeed add up.</p><p><em>_1309</em></p><p>Alright I am done with that side quest
<img src=https://i.imgur.com/ltFU8R1.png alt=Indeed></p></div></div></div></body><footer><hr>Author <a href=https://ed-m.dev/about>Edward M- </a>| Framework <a href=https://gohugo.io/>Hugo</a></footer></html>